--
-- PostgreSQL database dump
--

-- Dumped from database version 14.9 (Ubuntu 14.9-1.pgdg22.04+1)
-- Dumped by pg_dump version 15.4 (Ubuntu 15.4-1.pgdg22.04+1)

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- Name: public; Type: SCHEMA; Schema: -; Owner: postgres
--

-- *not* creating schema, since initdb creates it


ALTER SCHEMA public OWNER TO postgres;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- Name: admin; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.admin (
    username character varying(255) NOT NULL,
    password character varying(255),
    id integer NOT NULL,
    tc2_admin_id integer,
    pd_owner_id integer,
    first_name character varying(255) DEFAULT ''::character varying NOT NULL,
    last_name character varying(255) DEFAULT ''::character varying NOT NULL,
    timezone character varying(255) DEFAULT 'Europe/London'::character varying NOT NULL,
    is_sales_person boolean DEFAULT false NOT NULL,
    is_support_person boolean DEFAULT false NOT NULL,
    is_bdr_person boolean DEFAULT false NOT NULL,
    sells_payg boolean DEFAULT false NOT NULL,
    sells_startup boolean DEFAULT false NOT NULL,
    sells_enterprise boolean DEFAULT false NOT NULL
);


ALTER TABLE public.admin OWNER TO postgres;

--
-- Name: COLUMN admin.username; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.admin.username IS 'Use their ACTUAL email address, not META';


--
-- Name: admin_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.admin_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.admin_id_seq OWNER TO postgres;

--
-- Name: admin_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.admin_id_seq OWNED BY public.admin.id;


--
-- Name: company; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.company (
    id integer NOT NULL,
    name character varying(255) NOT NULL,
    tc2_agency_id integer,
    tc2_cligency_id integer,
    tc2_status character varying(25) DEFAULT 'pending_email_conf'::character varying NOT NULL,
    pd_org_id integer,
    created timestamp with time zone DEFAULT CURRENT_TIMESTAMP NOT NULL,
    price_plan character varying(255) DEFAULT 'payg'::character varying NOT NULL,
    country character varying(255),
    website character varying(255),
    paid_invoice_count integer DEFAULT 0 NOT NULL,
    estimated_income character varying(255),
    currency character varying(255),
    has_booked_call boolean DEFAULT false NOT NULL,
    has_signed_up boolean DEFAULT false NOT NULL,
    bdr_person_id integer,
    sales_person_id integer NOT NULL,
    support_person_id integer
);


ALTER TABLE public.company OWNER TO postgres;

--
-- Name: TABLE company; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE public.company IS 'Represents a company.';


--
-- Name: COLUMN company.country; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.company.country IS 'Country code, e.g. GB';


--
-- Name: company_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.company_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.company_id_seq OWNER TO postgres;

--
-- Name: company_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.company_id_seq OWNED BY public.company.id;


--
-- Name: config; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.config (
    id integer NOT NULL,
    meeting_dur_mins integer DEFAULT 30 NOT NULL,
    meeting_buffer_mins integer DEFAULT 15 NOT NULL,
    meeting_min_start character varying(5) DEFAULT '10:00'::character varying NOT NULL,
    meeting_max_end character varying(5) DEFAULT '17:30'::character varying NOT NULL,
    enterprise_pipeline_id integer,
    payg_pipeline_id integer,
    startup_pipeline_id integer
);


ALTER TABLE public.config OWNER TO postgres;

--
-- Name: TABLE config; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE public.config IS 'The model that stores the configuration for the app.';


--
-- Name: COLUMN config.meeting_dur_mins; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.config.meeting_dur_mins IS 'The length of a newly created meeting';


--
-- Name: COLUMN config.meeting_buffer_mins; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.config.meeting_buffer_mins IS 'The buffer time before and after a meeting';


--
-- Name: COLUMN config.meeting_min_start; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.config.meeting_min_start IS 'The earliest time a meeting can be booked for an admin in their timezone.';


--
-- Name: COLUMN config.meeting_max_end; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.config.meeting_max_end IS 'The earliest time a meeting can be booked for an admin in their timezone.';


--
-- Name: COLUMN config.enterprise_pipeline_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.config.enterprise_pipeline_id IS 'The pipeline that Enterprise clients will be added to';


--
-- Name: COLUMN config.payg_pipeline_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.config.payg_pipeline_id IS 'The pipeline that PAYG clients will be added to';


--
-- Name: COLUMN config.startup_pipeline_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.config.startup_pipeline_id IS 'The pipeline that Startup clients will be added to';


--
-- Name: config_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.config_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.config_id_seq OWNER TO postgres;

--
-- Name: config_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.config_id_seq OWNED BY public.config.id;


--
-- Name: contact; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.contact (
    id integer NOT NULL,
    tc2_sr_id integer,
    pd_person_id integer,
    created timestamp with time zone DEFAULT CURRENT_TIMESTAMP NOT NULL,
    first_name character varying(255),
    last_name character varying(255),
    email character varying(255),
    phone character varying(255),
    country character varying(255),
    company_id integer NOT NULL
);


ALTER TABLE public.contact OWNER TO postgres;

--
-- Name: TABLE contact; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE public.contact IS 'Represents a contact, an individual who works at a company.';


--
-- Name: contact_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.contact_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.contact_id_seq OWNER TO postgres;

--
-- Name: contact_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.contact_id_seq OWNED BY public.contact.id;


--
-- Name: deal; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.deal (
    id integer NOT NULL,
    pd_deal_id integer,
    name character varying(255),
    status character varying(255) DEFAULT 'open'::character varying NOT NULL,
    admin_id integer NOT NULL,
    company_id integer NOT NULL,
    contact_id integer,
    pipeline_id integer NOT NULL,
    stage_id integer NOT NULL
);


ALTER TABLE public.deal OWNER TO postgres;

--
-- Name: deal_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.deal_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.deal_id_seq OWNER TO postgres;

--
-- Name: deal_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.deal_id_seq OWNED BY public.deal.id;


--
-- Name: meeting; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.meeting (
    id integer NOT NULL,
    created timestamp with time zone DEFAULT CURRENT_TIMESTAMP NOT NULL,
    start_time timestamp with time zone,
    end_time timestamp with time zone,
    status character varying(255) DEFAULT 'PLANNED'::character varying NOT NULL,
    meeting_type character varying(255) NOT NULL,
    admin_id integer NOT NULL,
    contact_id integer NOT NULL,
    deal_id integer
);


ALTER TABLE public.meeting OWNER TO postgres;

--
-- Name: meeting_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.meeting_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.meeting_id_seq OWNER TO postgres;

--
-- Name: meeting_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.meeting_id_seq OWNED BY public.meeting.id;


--
-- Name: pipeline; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.pipeline (
    id integer NOT NULL,
    pd_pipeline_id integer NOT NULL,
    name character varying(255) NOT NULL,
    dft_entry_stage_id integer
);


ALTER TABLE public.pipeline OWNER TO postgres;

--
-- Name: pipeline_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.pipeline_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.pipeline_id_seq OWNER TO postgres;

--
-- Name: pipeline_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.pipeline_id_seq OWNED BY public.pipeline.id;


--
-- Name: stage; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.stage (
    id integer NOT NULL,
    pd_stage_id integer NOT NULL,
    name character varying(255) NOT NULL
);


ALTER TABLE public.stage OWNER TO postgres;

--
-- Name: stage_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.stage_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.stage_id_seq OWNER TO postgres;

--
-- Name: stage_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.stage_id_seq OWNED BY public.stage.id;


--
-- Name: admin id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.admin ALTER COLUMN id SET DEFAULT nextval('public.admin_id_seq'::regclass);


--
-- Name: company id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.company ALTER COLUMN id SET DEFAULT nextval('public.company_id_seq'::regclass);


--
-- Name: config id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.config ALTER COLUMN id SET DEFAULT nextval('public.config_id_seq'::regclass);


--
-- Name: contact id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.contact ALTER COLUMN id SET DEFAULT nextval('public.contact_id_seq'::regclass);


--
-- Name: deal id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.deal ALTER COLUMN id SET DEFAULT nextval('public.deal_id_seq'::regclass);


--
-- Name: meeting id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.meeting ALTER COLUMN id SET DEFAULT nextval('public.meeting_id_seq'::regclass);


--
-- Name: pipeline id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.pipeline ALTER COLUMN id SET DEFAULT nextval('public.pipeline_id_seq'::regclass);


--
-- Name: stage id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.stage ALTER COLUMN id SET DEFAULT nextval('public.stage_id_seq'::regclass);


--
-- Data for Name: admin; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.admin (username, password, id, tc2_admin_id, pd_owner_id, first_name, last_name, timezone, is_sales_person, is_support_person, is_bdr_person, sells_payg, sells_startup, sells_enterprise) FROM stdin;
fionn@tutorcruncher.com	$2b$12$f5PBbyPf6BqR5Xcm5ENmTucpEkW3bjuXIGre0fgrtjJ3j1SDgSwUC	2	67	15708604	Fionn	Finegan	Europe/London	t	f	t	f	f	t
maahi@tutorcruncher.com	$2b$12$OYGhv9v3eKaOBsiij0PONO8Y93VMeoFRjIJ7scz35QdEJBHGojjZ2	3	70	0	Maahi	Islam	Europe/London	f	t	f	f	f	f
raashi@tutorcruncher.com	$2b$12$.icKzLRxc6m6x2pJwXZxG.o19QLty5DiarGOcleBA5ZzlcNNo26QO	4	69	0	Raashi	Thakran	Europe/London	f	t	f	f	f	f
sam@tutorcruncher.com	$2b$12$a7RPq3FlqlM65m8B7Wglz.DJY8r7ixoiO1rOz82bL5uAA8R33ggqK	1	68	15747456	Sam	Linge	Europe/London	t	f	t	t	t	f
\.


--
-- Data for Name: company; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.company (id, name, tc2_agency_id, tc2_cligency_id, tc2_status, pd_org_id, created, price_plan, country, website, paid_invoice_count, estimated_income, currency, has_booked_call, has_signed_up, bdr_person_id, sales_person_id, support_person_id) FROM stdin;
1	plate dazzling tranquil	\N	\N	pending_email_conf	218	2023-09-21 17:00:56.318528+01	startup	GB	test.test.com	0	£10,000 - £20,000	GBP	f	f	\N	1	\N
2	fragile tolerant blue	7	374	pending_email_conf	219	2023-09-22 11:06:02.988637+01	6-payg	GB	http://test.test.com	0	\N	\N	f	f	\N	1	3
\.


--
-- Data for Name: config; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.config (id, meeting_dur_mins, meeting_buffer_mins, meeting_min_start, meeting_max_end, enterprise_pipeline_id, payg_pipeline_id, startup_pipeline_id) FROM stdin;
1	30	15	10:00	17:30	2	3	1
\.


--
-- Data for Name: contact; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.contact (id, tc2_sr_id, pd_person_id, created, first_name, last_name, email, phone, country, company_id) FROM stdin;
1	\N	54	2023-09-21 17:00:56.326434+01	Quilt	Plug Remote Kaleidoscopic	sebastian@tutorcruncher.com	+44 000000000	GB	1
2	375	55	2023-09-22 11:06:02.996692+01	pencil	graceful keyboard	\N		\N	2
3	\N	56	2023-09-22 11:20:14.055189+01	Jacket	Picture	sebastian@tutorcruncher.com		\N	2
\.


--
-- Data for Name: deal; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.deal (id, pd_deal_id, name, status, admin_id, company_id, contact_id, pipeline_id, stage_id) FROM stdin;
3	85	plate dazzling tranquil	open	1	1	1	1	7
\.


--
-- Data for Name: meeting; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.meeting (id, created, start_time, end_time, status, meeting_type, admin_id, contact_id, deal_id) FROM stdin;
5	2023-09-22 11:33:32.533047+01	2023-09-26 12:15:00+01	2023-09-26 12:45:00+01	PLANNED	support	4	3	\N
12	2023-09-22 12:27:15.377071+01	2023-10-04 10:00:00+01	2023-10-04 10:30:00+01	PLANNED	sales	1	1	3
13	2023-09-22 12:28:39.088705+01	2023-10-06 11:30:00+01	2023-10-06 12:00:00+01	PLANNED	sales	1	1	3
14	2023-09-22 12:29:48.591896+01	2023-10-09 10:00:00+01	2023-10-09 10:30:00+01	PLANNED	sales	1	1	3
15	2023-09-22 14:27:05.205111+01	2023-10-10 14:30:00+01	2023-10-10 15:00:00+01	PLANNED	sales	1	1	3
\.


--
-- Data for Name: pipeline; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.pipeline (id, pd_pipeline_id, name, dft_entry_stage_id) FROM stdin;
2	6	ENTERPRISE	2
1	5	STARTUP	7
3	2	PAYG	12
\.


--
-- Data for Name: stage; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.stage (id, pd_stage_id, name) FROM stdin;
2	30	ENTERPRISE Qualified
3	31	ENTERPRISE Contact Made
5	34	ENTERPRISE Negotiations Started
6	32	ENTERPRISE Demo Scheduled
4	33	ENTERPRISE Proposal Made
8	26	STARTUP Contact Made
10	27	STARTUP Demo Scheduled
7	25	STARTUP Qualified
9	28	STARTUP Proposal Made
11	29	STARTUP Negotiations Started
12	7	PAYG Qualified
14	10	PAYG Proposal Made
15	11	PAYG Negotiations Started
13	9	PAYG Demo Scheduled
\.


--
-- Name: admin_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.admin_id_seq', 4, true);


--
-- Name: company_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.company_id_seq', 2, true);


--
-- Name: config_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.config_id_seq', 1, true);


--
-- Name: contact_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.contact_id_seq', 3, true);


--
-- Name: deal_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.deal_id_seq', 3, true);


--
-- Name: meeting_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.meeting_id_seq', 15, true);


--
-- Name: pipeline_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.pipeline_id_seq', 3, true);


--
-- Name: stage_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.stage_id_seq', 15, true);


--
-- Name: admin admin_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.admin
    ADD CONSTRAINT admin_pkey PRIMARY KEY (id);


--
-- Name: admin admin_tc2_admin_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.admin
    ADD CONSTRAINT admin_tc2_admin_id_key UNIQUE (tc2_admin_id);


--
-- Name: company company_pd_org_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.company
    ADD CONSTRAINT company_pd_org_id_key UNIQUE (pd_org_id);


--
-- Name: company company_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.company
    ADD CONSTRAINT company_pkey PRIMARY KEY (id);


--
-- Name: company company_tc2_agency_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.company
    ADD CONSTRAINT company_tc2_agency_id_key UNIQUE (tc2_agency_id);


--
-- Name: company company_tc2_cligency_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.company
    ADD CONSTRAINT company_tc2_cligency_id_key UNIQUE (tc2_cligency_id);


--
-- Name: config config_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.config
    ADD CONSTRAINT config_pkey PRIMARY KEY (id);


--
-- Name: contact contact_pd_person_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.contact
    ADD CONSTRAINT contact_pd_person_id_key UNIQUE (pd_person_id);


--
-- Name: contact contact_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.contact
    ADD CONSTRAINT contact_pkey PRIMARY KEY (id);


--
-- Name: contact contact_tc2_sr_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.contact
    ADD CONSTRAINT contact_tc2_sr_id_key UNIQUE (tc2_sr_id);


--
-- Name: deal deal_pd_deal_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.deal
    ADD CONSTRAINT deal_pd_deal_id_key UNIQUE (pd_deal_id);


--
-- Name: deal deal_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.deal
    ADD CONSTRAINT deal_pkey PRIMARY KEY (id);


--
-- Name: meeting meeting_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.meeting
    ADD CONSTRAINT meeting_pkey PRIMARY KEY (id);


--
-- Name: pipeline pipeline_pd_pipeline_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.pipeline
    ADD CONSTRAINT pipeline_pd_pipeline_id_key UNIQUE (pd_pipeline_id);


--
-- Name: pipeline pipeline_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.pipeline
    ADD CONSTRAINT pipeline_pkey PRIMARY KEY (id);


--
-- Name: stage stage_pd_stage_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.stage
    ADD CONSTRAINT stage_pd_stage_id_key UNIQUE (pd_stage_id);


--
-- Name: stage stage_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.stage
    ADD CONSTRAINT stage_pkey PRIMARY KEY (id);


--
-- Name: company company_bdr_person_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.company
    ADD CONSTRAINT company_bdr_person_id_fkey FOREIGN KEY (bdr_person_id) REFERENCES public.admin(id) ON DELETE CASCADE;


--
-- Name: company company_sales_person_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.company
    ADD CONSTRAINT company_sales_person_id_fkey FOREIGN KEY (sales_person_id) REFERENCES public.admin(id) ON DELETE CASCADE;


--
-- Name: company company_support_person_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.company
    ADD CONSTRAINT company_support_person_id_fkey FOREIGN KEY (support_person_id) REFERENCES public.admin(id) ON DELETE CASCADE;


--
-- Name: config config_enterprise_pipeline_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.config
    ADD CONSTRAINT config_enterprise_pipeline_id_fkey FOREIGN KEY (enterprise_pipeline_id) REFERENCES public.pipeline(id) ON DELETE CASCADE;


--
-- Name: config config_payg_pipeline_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.config
    ADD CONSTRAINT config_payg_pipeline_id_fkey FOREIGN KEY (payg_pipeline_id) REFERENCES public.pipeline(id) ON DELETE CASCADE;


--
-- Name: config config_startup_pipeline_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.config
    ADD CONSTRAINT config_startup_pipeline_id_fkey FOREIGN KEY (startup_pipeline_id) REFERENCES public.pipeline(id) ON DELETE CASCADE;


--
-- Name: contact contact_company_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.contact
    ADD CONSTRAINT contact_company_id_fkey FOREIGN KEY (company_id) REFERENCES public.company(id) ON DELETE CASCADE;


--
-- Name: deal deal_admin_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.deal
    ADD CONSTRAINT deal_admin_id_fkey FOREIGN KEY (admin_id) REFERENCES public.admin(id) ON DELETE CASCADE;


--
-- Name: deal deal_company_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.deal
    ADD CONSTRAINT deal_company_id_fkey FOREIGN KEY (company_id) REFERENCES public.company(id) ON DELETE CASCADE;


--
-- Name: deal deal_contact_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.deal
    ADD CONSTRAINT deal_contact_id_fkey FOREIGN KEY (contact_id) REFERENCES public.contact(id) ON DELETE CASCADE;


--
-- Name: deal deal_pipeline_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.deal
    ADD CONSTRAINT deal_pipeline_id_fkey FOREIGN KEY (pipeline_id) REFERENCES public.pipeline(id) ON DELETE CASCADE;


--
-- Name: deal deal_stage_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.deal
    ADD CONSTRAINT deal_stage_id_fkey FOREIGN KEY (stage_id) REFERENCES public.stage(id) ON DELETE CASCADE;


--
-- Name: meeting meeting_admin_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.meeting
    ADD CONSTRAINT meeting_admin_id_fkey FOREIGN KEY (admin_id) REFERENCES public.admin(id) ON DELETE CASCADE;


--
-- Name: meeting meeting_contact_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.meeting
    ADD CONSTRAINT meeting_contact_id_fkey FOREIGN KEY (contact_id) REFERENCES public.contact(id) ON DELETE CASCADE;


--
-- Name: meeting meeting_deal_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.meeting
    ADD CONSTRAINT meeting_deal_id_fkey FOREIGN KEY (deal_id) REFERENCES public.deal(id) ON DELETE SET NULL;


--
-- Name: pipeline pipeline_dft_entry_stage_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.pipeline
    ADD CONSTRAINT pipeline_dft_entry_stage_id_fkey FOREIGN KEY (dft_entry_stage_id) REFERENCES public.stage(id) ON DELETE CASCADE;


--
-- Name: SCHEMA public; Type: ACL; Schema: -; Owner: postgres
--

REVOKE USAGE ON SCHEMA public FROM PUBLIC;
GRANT ALL ON SCHEMA public TO PUBLIC;


--
-- PostgreSQL database dump complete
--

